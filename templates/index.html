{% extends 'base.html' %}
{% block content %}

<!-- acerca de mi -->
<div id="acerca" class="row align-items-center mb-5">
  <div class="col-md-4 text-center">
    <img src="{{ url_for('static', filename='uploads/profile.jpg') }}" alt="perfil" class="img-fluid rounded-circle profile-img">
  </div>
  <div class="col-md-8">
    <h1 class="display-6">{{ personal.name }}</h1>
    <h4 class="text-muted">{{ personal.title }}</h4>
    <p class="lead">{{ personal.about }}</p>
    <p>
      <a href="{{ personal.linkedin }}" target="_blank">Linkedin</a> |
      <a href="{{ personal.github }}" target="_blank">Github</a> |
      <a href="{{ url_for('download_cv') }}">Descargar CV</a>
    </p>
  </div>
</div>

<hr class="my-4">

<!-- experiencia -->
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 id="experiencia" class="m-0">Experiencia</h3>
  {% if session.get('admin') %}
  <a href="{{ url_for('add_entry', tipo='experience') }}" class="btn btn-sm btn-outline-success">
    <i class="bi bi-plus-lg"></i> Agregar
  </a>
  {% endif %}
</div>

<div class="row">
  {% for e in experiences %}
  <div class="col-md-6 mb-3">
    <div class="card bg-secondary text-light h-100 position-relative">

      {% if session.get('admin') %}
      <div class="position-absolute top-0 end-0 p-2 d-flex">
        <a href="{{ url_for('edit_entry', tipo='experience', id=e.id) }}" class="btn btn-sm btn-outline-light me-2">
          <i class="bi bi-pencil"></i>
        </a>
        <a href="{{ url_for('delete_entry', tipo='experience', id=e.id) }}"
           class="btn btn-sm btn-outline-danger"
           onclick="return confirm('¿Eliminar esta experiencia?');">
           <i class="bi bi-x"></i>
        </a>
      </div>
      {% endif %}

      <div class="card-body">
        <h5 class="card-title">{{ e.company }}</h5>
        <h6 class="card-subtitle mb-2 text-muted">{{ e.role }}</h6>
        <p class="card-text small">{{ e.start_date }} - {{ e.end_date }}</p>
        <p class="card-text">{{ e.description }}</p>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<hr class="my-4">

<!-- educacion -->
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 id="educacion" class="m-0">Educación</h3>

  {% if session.get('admin') %}
  <a href="{{ url_for('add_entry', tipo='education') }}" class="btn btn-sm btn-outline-success">
    <i class="bi bi-plus-lg"></i> Agregar
  </a>
  {% endif %}
</div>

<div class="row">
  {% for e in education %}
  <div class="col-md-6 mb-3">
    <div class="card bg-secondary text-light h-100 position-relative">

      {% if session.get('admin') %}
      <div class="position-absolute top-0 end-0 p-2 d-flex">
        <a href="{{ url_for('edit_entry', tipo='education', id=e.id) }}" class="btn btn-sm btn-outline-light me-2">
          <i class="bi bi-pencil"></i>
        </a>
        <a href="{{ url_for('delete_entry', tipo='education', id=e.id) }}"
           class="btn btn-sm btn-outline-danger"
           onclick="return confirm('¿Eliminar esta educación?');">
           <i class="bi bi-x"></i>
        </a>
      </div>
      {% endif %}

      <div class="card-body">
        <h5 class="card-title">{{ e.institution }}</h5>
        <h6 class="card-subtitle mb-2 text-muted">{{ e.degree }}</h6>
        <p class="card-text small">{{ e.start_year }} - {{ e.end_year }}</p>
        <p class="card-text">{{ e.description }}</p>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<hr class="my-4">


<!-- hard & soft skills -->
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 id="skills" class="m-0">Hard & Soft Skills</h3>

  {% if session.get('admin') %}
  <a href="{{ url_for('add_entry', tipo='skills') }}" class="btn btn-sm btn-outline-success">
    <i class="bi bi-plus-lg"></i> Agregar
  </a>
  {% endif %}
</div>

<div class="row">
  {% for s in skills %}
  <div class="col-md-6 mb-3">
    <div class="bg-dark rounded p-3 position-relative">

      {% if session.get('admin') %}
      <div class="position-absolute top-0 end-0 p-1 d-flex">
        <a href="{{ url_for('edit_entry', tipo='skills', id=s.id) }}" class="btn btn-sm btn-outline-light me-1">
          <i class="bi bi-pencil"></i>
        </a>
        <a href="{{ url_for('delete_entry', tipo='skills', id=s.id) }}"
           class="btn btn-sm btn-outline-danger"
           onclick="return confirm('¿Eliminar esta skill?');">
          <i class="bi bi-x"></i>
        </a>
      </div>
      {% endif %}

      <div class="d-flex justify-content-between">
        <span>{{ s.name }}</span>
        <span>{{ s.level }}%</span>
      </div>
      <div class="progress mt-1" style="height:8px;">
        <div class="progress-bar" role="progressbar" style="width:0%" data-target="{{ s.level }}"></div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<hr class="my-4">

<!-- proyectos -->
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 id="proyectos" class="m-0">Proyectos</h3>

  {% if session.get('admin') %}
  <a href="{{ url_for('add_entry', tipo='projects') }}" class="btn btn-sm btn-outline-success">
    <i class="bi bi-plus-lg"></i> Agregar
  </a>
  {% endif %}
</div>

<div class="row g-3">
  {% for p in projects %}
  <div class="col-md-6">
    <div class="card bg-secondary text-light h-100 position-relative">
      
      {% if session.get('admin') %}
      <div class="position-absolute top-0 end-0 p-2 d-flex">
        <a href="{{ url_for('edit_entry', tipo='projects', id=p.id) }}" class="btn btn-sm btn-outline-light me-2">
          <i class="bi bi-pencil"></i>
        </a>
        <a href="{{ url_for('delete_entry', tipo='projects', id=p.id) }}"
           class="btn btn-sm btn-outline-danger"
           onclick="return confirm('¿Eliminar este proyecto?');">
           <i class="bi bi-x"></i>
        </a>
      </div>
      {% endif %}

      <img src="{{ url_for('static', filename='uploads/' ~ p.image) }}" class="project-img" alt="{{ p.title }}">
      <div class="card-body">
        <h5 class="card-title">{{ p.title }}</h5>
        <p class="card-text">{{ p.description }}</p>

        {% if p.github %}
        <a href="{{ p.github }}" class="btn btn-outline-light btn-sm" target="_blank">Ver en GitHub</a>
        {% endif %}
      </div>
    </div>
  </div>
  {% endfor %}
</div>

{% endblock %}
